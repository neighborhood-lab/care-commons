echo "ğŸª Running pre-commit checks..."
echo "âš ï¸  These checks are MANDATORY and cannot be bypassed."
echo "âš ï¸  Do NOT use --no-verify to skip these checks."
echo ""

# Format and lint staged files
echo "ğŸ“ Formatting and linting staged files..."
npx lint-staged
lint_staged_exit=$?

if [ $lint_staged_exit -ne 0 ]; then
  echo ""
  echo "âŒ Formatting/linting FAILED!"
  echo "âŒ Please fix the errors above before committing."
  exit 1
fi

# Run full checks
./scripts/brief-check.sh
exit_code=$?

if [ $exit_code -ne 0 ]; then
  echo ""
  echo "âŒ Pre-commit checks FAILED!"
  echo "âŒ Please fix the errors above before committing."
  echo "âŒ Do NOT bypass these checks with --no-verify"
  exit 1
fi

echo ""
echo "âœ… All pre-commit checks passed!"
exit 0
