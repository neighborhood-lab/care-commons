# ════════════════════════════════════════════════════════════════
# Database Configuration
# ════════════════════════════════════════════════════════════════
# For local development with Docker (docker-compose up -d):
DB_HOST=localhost
DB_PORT=5432
DB_NAME=care_commons
DB_USER=postgres
DB_PASSWORD=postgres
DB_SSL=false

# Alternative: Use DATABASE_URL for cloud deployment (Vercel + Neon)
# DATABASE_URL=postgresql://user:password@host:5432/database?sslmode=require
# Note: Neon pooled connection strings are recommended for serverless

# ════════════════════════════════════════════════════════════════
# Redis Configuration (optional - for rate limiting and caching)
# ════════════════════════════════════════════════════════════════
# For local development with Docker:
REDIS_URL=redis://localhost:6379

# For Vercel with Upstash Redis (recommended for production):
# Get credentials from: https://console.upstash.com
# REDIS_URL=rediss://default:your_password@your-endpoint.upstash.io:6379
# Note: Use 'rediss://' (with double 's') for TLS connections

# For Vercel KV (built on Upstash):
# Automatically set by Vercel when you add Redis storage
# KV_URL, KV_REST_API_URL, KV_REST_API_TOKEN (set by Vercel)
# Map KV_URL to REDIS_URL in Vercel environment settings

# Alternative: Redis Cloud, AWS ElastiCache, etc.
# REDIS_URL=redis://username:password@host:port/db

# Application
NODE_ENV=development
PORT=3000

# CORS Configuration
# In development: use * to allow all origins
# In production: Vercel deployments (*.vercel.app) are automatically allowed
# Add custom domains as comma-separated list if needed
CORS_ORIGIN=*

# Security - JWT Authentication
# Generate strong secrets with: openssl rand -base64 32
JWT_SECRET=your_jwt_secret_here_change_in_production_min_32_chars
JWT_REFRESH_SECRET=your_jwt_refresh_secret_here_change_in_production_min_32_chars
SESSION_SECRET=your_session_secret_here_change_in_production

# Google OAuth 2.0 Configuration
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your_google_client_id_here.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret_here

# Development Mock Authentication (for testing only) - REQUIRED in development
MOCK_USER_PASSWORD=your_secure_mock_password_here

# Encryption (for sensitive fields like SSN)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=your_32_byte_encryption_key_here_change_in_production

# Logging
LOG_LEVEL=info

# Vercel Deployment (configure via Vercel dashboard or CLI)
# VERCEL_TOKEN=your_vercel_token
# VERCEL_ORG_ID=your_vercel_org_id
# VERCEL_PROJECT_ID=your_vercel_project_id

# Cloud Environment URLs (for reference)
# STAGING_DATABASE_URL=postgresql://user:password@neon-staging-host:5432/care_commons_staging?sslmode=require
# PRODUCTION_DATABASE_URL=postgresql://user:password@neon-prod-host:5432/care_commons_production?sslmode=require

# ════════════════════════════════════════════════════════════════
# Supabase Configuration (Alternative to Neon - for Cloudflare deployment)
# ════════════════════════════════════════════════════════════════
# Get these from: https://supabase.com/dashboard/project/[project-ref]/settings/database

# Supabase Connection Strings:
# 1. Direct connection (for migrations) - Port 5432
# SUPABASE_DATABASE_URL=postgres://postgres:[password]@db.[project-ref].supabase.co:5432/postgres

# 2. Transaction pooler (for applications) - Port 6543 + ?pgbouncer=true
# SUPABASE_DATABASE_URL_POOLED=postgres://postgres.[project-ref]:[password]@aws-0-us-east-1.pooler.supabase.com:6543/postgres?pgbouncer=true

# Supabase API Keys (from Dashboard → Settings → API)
# SUPABASE_URL=https://[project-ref].supabase.co
# SUPABASE_ANON_KEY=your_supabase_anon_key_here
# SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here_keep_secret

# Supabase Project Details
# SUPABASE_PROJECT_REF=your_project_ref_here
# SUPABASE_PROJECT_ID=your_project_id_here

# Geocoding API Configuration
# Provider options: google, mapbox, nominatim
# - Google Maps: Most accurate, requires API key, paid service
# - Mapbox: Good accuracy, reasonable pricing, requires API key
# - Nominatim: Free (OpenStreetMap), rate-limited, no API key needed
GEOCODING_PROVIDER=mapbox
GEOCODING_API_KEY=your_geocoding_api_key_here

# Optional: External Services
# SENTRY_DSN=
# SMTP_HOST=
# SMTP_PORT=
# SMTP_USER=
# SMTP_PASSWORD=

# Codecov Configuration
# Bundle analysis and code coverage reporting
# Get token from: https://app.codecov.io/gh/neighborhood-lab/care-commons
# CODECOV_TOKEN=your_codecov_token_here

# ════════════════════════════════════════════════════════════════
# Texas EVV - HHAeXchange Aggregator (Required for TX agencies)
# ════════════════════════════════════════════════════════════════
# HHAeXchange OAuth2 client credentials
HHAEXCHANGE_CLIENT_ID=your_client_id_here
HHAEXCHANGE_CLIENT_SECRET=your_client_secret_here
# Use sandbox for testing, production for live submissions
HHAEXCHANGE_BASE_URL=https://sandbox.hhaexchange.com/api
# Production: https://api.hhaexchange.com/api
